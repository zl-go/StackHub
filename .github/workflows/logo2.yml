name: logo timely update

on: 
  workflow_dispatch:
  
jobs:
  build:
    runs-on: ubuntu-latest
    permissions:
      # Give the default GITHUB_TOKEN write permission to commit and push the changed files back to the repository.
      contents: write
    steps:
    - uses: actions/checkout@master
      name: Check out code  
    
    - name: update logo
      run: |  
        # 获取contentful中所有url
        entry=$(curl --include \
             --request GET \
             --header 'Authorization: Bearer ${{secrets.CONTENTFUL_TOKEN}}' \
             https://api.contentful.com/spaces/ffrhttfighww/environments/master/entries?content_type=product\&select=fields.slug\,fileds.imageurl\&locale=en-US | tail -n 1)
        echo $entry
        echo $entry | jq -r '.total'
        
